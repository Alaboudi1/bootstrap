// ----------------------------------------------------------------------------
//
// Basecode Compiler
// Copyright (C) 2018 Jeff Panici
// All rights reserved.
//
// This software source file is licensed under the terms of MIT license.
// For details, please read the LICENSE file.
//
// ----------------------------------------------------------------------------

public :: ns {

    exit   :: proc(level: s32) {
        #assembly {{
            .ilocal     temp1
            ; this is temporary until i fix how locals are stored for blocks
            ; load.dw     temp1, fp, offset(level)
            load.dw     temp1, fp, #$10
            push.dw     temp1
            jmp.qw      _end
        }};
    };

    assert :: proc(predicate: bool, message: ^u8) {
        if predicate {
            return;
        };
        print("assertion failure: %s\n", message);
        exit(1);
    };

};